<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
	<meta name="description" content="" />
	<meta name="author" content="" />
	<title>42Bobs</title>
	<!-- Favicon-->
	<link rel="icon" type="image/x-icon" href="_assets/img/favicon.ico" />
	<!-- Bootstrap icons-->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet" />
	<!-- Core theme CSS (includes Bootstrap)-->
	<link href="../_assets/css/styles.css" rel="stylesheet" />

	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- Bootstrap 4 -->
	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"
		integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">
	</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<!-- Sweet Alert -->
	<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
	<!-- Time picker-->
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.css">
	<script src="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.js"></script>
	<style>
		.flex-row {
			overflow-x: auto;
		}

		.mymenubutton {
			width: 100%;
			height: 100%;
			border: 3px solid rgb(21, 178, 179);
			border-radius: 15px;
			background-color: rgb(255, 255, 255);
			color: rgb(21, 178, 179);
		}

		.flex-row-header{
			overflow-x: auto;
			border: 3px solid rgb(21, 178, 179);
			border-radius: 15px;
			background-color: rgb(255, 255, 255);
			color: rgb(21, 178, 179);
		}

		.btn-outline-primary{
			border-color:rgb(21, 178, 179);
			color: rgb(21, 178, 179);
			background-color: rgb(255, 255, 255);
		}

		.mychkbutton {
			width: 100%;
			height: 100%;
			border: 3px solid rgb(21, 178, 179);
			background-color: rgb(21, 178, 179);
			color: rgb(255,255,255);
		}

	</style>
</head>

<body>
	<!-- Responsive navbar-->
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
		<div class="container px-lg-5">
			<image class="nav-brand" src="https://s-um.github.io/bobs_test/42bobs_logo.png"
				style="margin: auto 30px;height:100%;display:table-cell;vertical-align:middle;" />
			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
				aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span
					class="navbar-toggler-icon"></span></button>
			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="navbar-nav ms-auto mb-2 mb-lg-0">
					<li class="nav-item"><span class="nav-link active">chahan</span></li>
					<li class="nav-item"><a class="nav-link" href="localhost:8080/logout">Logout</a></li>
				</ul>
			</div>
		</div>
	</nav>


	<!-- Header-->
	<header class="py-5 ">
		<div class="container px-lg-5">
			<div class="p-4 p-lg-5 flex-row-header bg-light rounded-3 text-center">
				<div class="m-4 m-lg-5">					
					<!-- <div class="input-group mb-3">
						<input type="text" class="form-control" placeholder="시작시간" aria-label="name"
							aria-describedby="basic-addon2">
						<p class="text-center">&nbsp~&nbsp</p>
						<input type="text" class="form-control" placeholder="종료시간" aria-label="name"
							aria-describedby="basic-addon2">
					</div> -->
					<!-- Menu Picker -->
					
					<br>
					<div class="btn-group" role="group" aria-label="Basic radio toggle button group">
						<input type="radio" class="btn-check" name="btnradio" id="btnradio1" autocomplete="off" checked>
						<label class="btn btn-lg btn-outline-primary" for="btnradio1">한식</label>
					</div>
					<div class="btn-group" role="group" aria-label="Basic radio toggle button group">
						<input type="radio" class="btn-check" name="btnradio" id="btnradio2" autocomplete="off">
						<label class="btn btn-lg btn-outline-primary" for="btnradio2">중식</label>
					</div>
					<div class="btn-group" role="group" aria-label="Basic radio toggle button group">
						<input type="radio" class="btn-check" name="btnradio" id="btnradio3" autocomplete="off">
						<label class="btn btn-lg btn-outline-primary" for="btnradio3">양식</label>
					</div>
					<br>
					<br>
					<!-- Place Picker -->
					<div class="btn-group" role="group" aria-label="Basic radio toggle button group">
						<input type="radio" class="btn-check" name="btnplace" id="btnplace1" autocomplete="off" checked>
						<label class="btn btn-lg btn-outline-primary" for="btnplace1">서초</label>
					</div>
					<div class="btn-group" role="group" aria-label="Basic radio toggle button group">
						<input type="radio" class="btn-check" name="btnplace" id="btnplace2" autocomplete="off">
						<label class="btn btn-lg btn-outline-primary" for="btnplace2">개포</label>
					</div>
					<br>
					<br>

					<!-- Time Picker -->
					<div class="mob input-group mb-3">
						<!-- <label class="text-grey mr-1 m-2" >종료 시간</label>
						<input class="ml-1 form-control" id="endtime" type="time" name="from" aria-label="name" aria-describedby="basic-addon2"> -->
						<label class="text-grey mr-1 m-2" >종료 시간</label>
						<input class="ml-1 form-control timepicker" id="endtime2" name="from" aria-label="name" aria-describedby="basic-addon2" jt-timepicker="" time="model.time" time-string="model.timeString" default-time="model.options.defaultTime" time-format="model.options.timeFormat" start-time="model.options.startTime" min-time="model.options.minTime" max-time="model.options.maxTime" interval="model.options.interval" dynamic="model.options.dynamic" scrollbar="model.options.scrollbar" dropdown="model.options.dropdown">
					</div>
					<br>
					<div class="d-grid gap-2">
						<button class="btn btn-primary mychkbutton" id="submit" type="button">생성하기</button>
					</div>
				</div>
			</div>
		</div>
	</header>

	<!-- header script -->
	<script>
		$('.timepicker').timepicker(
		{
			timeFormat: 'hh:mm p',
			interval: 60,
			minTime: '00:00',
			maxTime: '23:00',
			defaultTime: '',
			startTime: '01:00',
			dynamic: true,
			dropdown: true,
			scrollbar: true
		});

		$("#submit").click(function(){
			var endtime = $("#endtime2").val();
			/********* 필수!! ************/
			// 여기에 저장되는 값을 서버로 넘기어 주세요
			var ret;
			let today = new Date();

			let year = today.getFullYear();
			let month = today.getMonth() + 1;
			let day = today.getDate();
			let hours = today.getHours();
			let minutes = today.getMinutes();
			let curTime = hours + ":" + minutes; // time to current
			let curPlusFive = hours + ":" + (minutes + 5); // time to next five min future
			// make time canonical
			// if minutes over the 60
			if (minutes + 5 >= 60)
			{
				if(hours + 1 >= 25)
					curPlusFive = 01 + ":" + ((minutes + 5) % 60);
				else
					curPlusFive = (hours + 1) + ":" + ((minutes + 5) % 60);
			} // end of over the 60
			// normal case
			else
			{
				curPlusFive = hours + ":" + (minutes + 5);
			} // end of normal case

			// split hours and make full time as 24 rule
			var str = endtime.split(' ');
			if(str[1] == 'PM')
			{
				if(str[0] == '12:00')
					endtime = '12:00';
				else
				{
					var tmp = str[0].split(':');
					endtime = String(parseInt(tmp[0]) + 12) + ':00';
				}
			} else{
				if (str[0] == '12:00')
					endtime = '24:00';
				else endtime = String(str[0]);
			} // end of split and change hours
			console.log(endtime, curPlusFive, curTime);

			// if endtime is null
			if (endtime == '')
			{
				swal({
					title: "시간을 입력해주세요!",
					text: "최소 5분 후 예약부터 가능합니다.",
					icon: "warning",
				});
			} // end of endtime is null
			// if endtime is under than curPlusFive
			else if(endtime <= curPlusFive && curTime <= endtime)
			{
				swal({
					title: "방 생성에 실패했습니다.",
					text: "최소 5분 후 예약부터 가능합니다.",
					icon: "error",
				});
			} // end of error
			// if today or tomorrow and successful time selected
			else if(endtime != '')
			{
				swal({
					title: "방이 생성되었습니다!",
					text: "잠시만 기다리면 밥동료가 찾아옵니다.",
					icon: "success",
				});
				// if user select tomorrow
				if (endtime <= curPlusFive)
				{
					// day end
					//28 or 29
					if (month == '2' && (day == '28' || day == '29'))
					{
						//윤년
						if ((year % 4 == 0 && year % 100 != 0) || (year % 400 == 0))
						{
							if(day == '29')
								ret = String(year) +'-0' + String(month + 1) + '-01' + ' ' + endtime + ':00';
							else
								ret = String(year) +'-0' + String(month) + '-' + String(day) + ' ' + endtime + ':00';
						}
						else if (day == '28')
						{
							ret = String(year) +'-0' + String(month + 1) + '-01' + ' ' + endtime + ':00';
						}
					}
					//30
					else if ((month == '4' || month == '6' || month == '9'
							|| month == '11') && day == '30')
					{
						if(month == '11' || month == '9')
							ret = String(year) +'-' + String(month + 1) + '-01' + ' ' + endtime + ':00';
						else
							ret = String(year) +'-0' + String(month + 1) + '-01' + ' ' + endtime + ':00';
					}
					else if ((month == '1' || month == '3' || month == '5'
							|| month == '7' || month == '8' || month == '10'
							|| month == '12') && day == '31')
					{
						if (month == '10')
							ret = String(year) +'-' + String(month + 1) + '-01' + ' ' + endtime + ':00';
						else if (month == '12')
							ret = String(year) +'-01-01' + ' ' + endtime + ':00';
						else
							ret = String(year) +'-0' + String(month + 1) + '-01' + ' ' + endtime + ':00';
					} // end of day end
					// normal tomorrow
					else
					{
						if(month == '10' || month == '11' || month == '12')
						{
							if(day >= 9)
								ret = String(year) +'-' + String(month) + '-' + String(day + 1) + ' ' + endtime + ':00';
							else
								ret = String(year) +'-' + String(month) + '-0' + String(day + 1) + ' ' + endtime + ':00';
						}
						else
						{
							if(day >= 9)
								ret = String(year) +'-0' + String(month) + '-' + String(day + 1) + ' ' + endtime + ':00';
							else
								ret = String(year) +'-0' + String(month) + '-0' + String(day + 1) + ' ' + endtime + ':00';
						}
					} // end of normal tomorrow

				} // end of tomorrow
				// select today
				else
				{
					if(month == '10' || month == '11' || month == '12')
						{
							if(day >= 9)
								ret = String(year) +'-' + String(month) + '-' + String(day) + ' ' + endtime + ':00';
							else
								ret = String(year) +'-' + String(month) + '-0' + String(day) + ' ' + endtime + ':00';
						}
						else
						{
							if(day >= 9)
								ret = String(year) +'-0' + String(month) + '-' + String(day) + ' ' + endtime + ':00';
							else
								ret = String(year) +'-0' + String(month) + '-0' + String(day) + ' ' + endtime + ':00';
						}
				} // end of today
				console.log(ret);
			} // end of success
		})
	</script>
	<!-- End of header script -->

	<!-- Page Content-->
	<section class="pt-4">
		<div class="container px-lg-5">
			<!-- Page Features-->
			<div class="row gx-lg-5 flex-row flex-nowrap">
				<div class="col-lg-6 col-xxl-4 mb-5">
					<div class="card bg-light border-0 h-100">
						<button class='mymenubutton'>
							</br>
							<h2 class="fs-4 fw-bold">양식 먹어요!</h2>
							</br>
							<p class="mb-0">
								2021-7-8 13:00:00 ~</br>
								myoon,chahan
							</p>
							</br>
						</button>
					</div>
				</div>
				<div class="col-lg-6 col-xxl-4 mb-5">
					<div class="card bg-light border-0 h-100">
						<div class="card-body text-center p-4 p-lg-5 pt-0 pt-lg-0">
							<div class="feature bg-primary bg-gradient text-white rounded-3 mb-4 mt-n4"><i
									class="bi bi-collection"></i></div>
							<h2 class="fs-4 fw-bold">Fresh new layout</h2>
							<p class="mb-0">With Bootstrap 5, we've created a fresh new layout for this template!</p>
						</div>
					</div>
				</div>
				<div class="col-lg-6 col-xxl-4 mb-5">
					<div class="card bg-light border-0 h-100">
						<div class="card-body text-center p-4 p-lg-5 pt-0 pt-lg-0">
							<div class="feature bg-primary bg-gradient text-white rounded-3 mb-4 mt-n4"><i
									class="bi bi-cloud-download"></i></div>
							<h2 class="fs-4 fw-bold">Free to download</h2>
							<p class="mb-0">As always, Start Bootstrap has a powerful collectin of free templates.</p>
						</div>
					</div>
				</div>
				<div class="col-lg-6 col-xxl-4 mb-5">
					<div class="card bg-light border-0 h-100">
						<div class="card-body text-center p-4 p-lg-5 pt-0 pt-lg-0">
							<div class="feature bg-primary bg-gradient text-white rounded-3 mb-4 mt-n4"><i
									class="bi bi-card-heading"></i></div>
							<h2 class="fs-4 fw-bold">Jumbotron hero header</h2>
							<p class="mb-0">The heroic part of this template is the jumbotron hero header!</p>
						</div>
					</div>
				</div>
				<div class="col-lg-6 col-xxl-4 mb-5">
					<div class="card bg-light border-0 h-100">
						<div class="card-body text-center p-4 p-lg-5 pt-0 pt-lg-0">
							<div class="feature bg-primary bg-gradient text-white rounded-3 mb-4 mt-n4"><i
									class="bi bi-bootstrap"></i></div>
							<h2 class="fs-4 fw-bold">Feature boxes</h2>
							<p class="mb-0">We've created some custom feature boxes using Bootstrap icons!</p>
						</div>
					</div>
				</div>
				<div class="col-lg-6 col-xxl-4 mb-5">
					<div class="card bg-light border-0 h-100">
						<div class="card-body text-center p-4 p-lg-5 pt-0 pt-lg-0">
							<div class="feature bg-primary bg-gradient text-white rounded-3 mb-4 mt-n4"><i class="bi bi-code"></i>
							</div>
							<h2 class="fs-4 fw-bold">Simple clean code</h2>
							<p class="mb-0">We keep our dependencies up to date and squash bugs as they come!</p>
						</div>
					</div>
				</div>
				<div class="col-lg-6 col-xxl-4 mb-5">
					<div class="card bg-light border-0 h-100">
						<div class="card-body text-center p-4 p-lg-5 pt-0 pt-lg-0">
							<div class="feature bg-primary bg-gradient text-white rounded-3 mb-4 mt-n4"><i
									class="bi bi-patch-check"></i></div>
							<h2 class="fs-4 fw-bold">A name you trust</h2>
							<p class="mb-0">Start Bootstrap has been the leader in free Bootstrap templates since 2013!</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
	<!-- Footer-->
	<footer class="py-5 bg-dark">
		<div class="container">
			<p class="m-0 text-center text-white">Copyright &copy; 42Bob's 2021</p>
		</div>
	</footer>
	<!-- Bootstrap core JS-->
	<!--script-- src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></!--script-->
	<!-- Core theme JS-->
	<script src="js/scripts.js"></script>
</body>

</html>
